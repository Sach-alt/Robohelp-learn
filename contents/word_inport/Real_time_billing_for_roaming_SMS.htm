<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"/><title>Real-time billing for roaming SMS</title><meta name="generator" content="Adobe RoboHelp 2019"/><link rel="stylesheet" href="../assets/css/default.css"/><link rel="stylesheet" href="../assets/css/PortaBilling_Admin_Guide_MR82.css"/></head><body><div><ul data-start="1.254" xmlns=""><li><ul data-start="1.254"><li><h2><a id="_Toc31205416"></a>Real-time billing for roaming SMS</h2><p>PortaBilling® supports real-time billing for SMS services used in roaming networks. When a subscriber sends an SMS from their home country, PortaBilling® uses the “home” tariff with domestic rates to charge them. To charge for an SMS sent from abroad, PortaBilling® identifies the country the subscriber is currently visiting and selects the roaming tariff based on this country. Then it charges the subscriber depending upon the destination number. </p><p> </p><p>This is how it works in detail. </p><p>All of the world’s countries are divided into roaming zones to formulate the pricing for service usage. Each zone has its own rate defined in the roaming tariff. </p><p> </p><p>The administrator creates a special “Roaming Zones” destination group set in PortaBilling®. The destination groups within the set correspond to the roaming zones and contain their own respective destinations. The home country is not included in the destination group set.</p><p> </p><p>When a subscriber sends an SMS from abroad, PortaBilling® receives the Diameter Ro request for processing. The request contains the Originator-SCCP-Address AVP (attribute-value pair) with the E.164 number of the serving SMSC. PortaBilling® uses this number to look up the longest destination match among the destination groups in the “Roaming Zones” destination group set. The destination group serves to identify the user’s roaming zone. This destination group name matches the access code defined for the usage charges record in the product configuration. Thus, PortaBilling® uses this name to select the roaming tariff and charge the subscriber.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image171.png" width="460.8" height="259.2" alt="roaming charges setup "/></p><p> </p><p>For example, let’s say that John Doe from Canada is traveling in the UK. The UK belongs to roaming zone 2 where SMSs to Canada cost $0.03. The “Roaming Zones” destination group set in PortaBilling® contains the destination group “Zone2” which includes the UK destinations. </p><p> </p><p>John sends an SMS to his wife in Canada. PortaBilling® receives the Diameter Ro request with the number 447340555555 in the Originator-SCCP-Address AVP. PortaBilling® finds the longest match for 447340555555 in the destination group “Zone2.” PortaBilling® searches for the usage charges record with the Zone2 access code in John’s product configuration and selects the corresponding roaming tariff. As a result, John is charged $0.03 for an SMS. </p><p> </p><p>With this functionality, the benefits for mobile subscribers include:</p></li><li>the ability to send SMSs regardless of their location; </li><li>a clear view of one’s own expenses and therefore, better control. <p> </p><p>MVNOs, in their turn, benefit from being able to:</p></li><li>deliver mobile services to subscribers in both the home network and when they are visiting other countries;</li><li>reduce the risk of revenue loss by charging subscribers in real time; and</li><li>cooperate with multiple roaming partners, thereby extending the coverage map.</li></ul></li></ul><h4>Implementation specifics for roaming SMS billing:</h4><p>Real-time billing for roaming SMSs is enabled via a special module for Diameter. To enable it, enter the roamingzone=Porta::Extra::RoamingAccessCode string in the Custom.LoadModules option on the Configuration server. </p><p>You must create the destination group set with the name “Roaming Zones” in PortaBilling®. It is used to identify the user’s roaming zone and consequently select a roaming tariff. </p><p>The destination group set can contain all countries distributed among the destination groups according to the roaming zones they belong to. The home country is not included and SMSs sent from it are charged using the default SMPP access code. </p><p>Access codes in product rating lists must correspond to the destination group names in the “Roaming Zones” destination group set.</p><h4>Known limitations:</h4><p>PortaBilling® charges only for outgoing SMSs.</p><p>The user is charged for sending SMSs regardless of whether the SMS was delivered or not. </p></div></body></html>