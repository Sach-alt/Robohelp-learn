<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"/><title>Customer Premises Equipment (CPE) provisioning and inventory</title><meta name="generator" content="Adobe RoboHelp 2019"/><link rel="stylesheet" href="../assets/css/default.css"/><link rel="stylesheet" href="../assets/css/PortaBilling_Admin_Guide_MR82.css"/></head><body><div><ul data-start="308" xmlns=""><li><h2><a id="_Customer_Premises_Equipment"></a><a id="_Toc31205433"></a>Customer Premises Equipment (CPE) provisioning and inventory</h2><p>If you provide your VoIP customers with CPE equipment like IP phones, you know how laborious and yet important the task of performing initial configuration is. If the equipment is not configured properly, it will not work after being delivered to the customer. Or, even if it works initially, problems will arise if you need to change the IP address of the SIP server. How can you reconfigure thousands of devices that are already on the customer’s premises? There are two ways to manage the device configuration.</p><h4>Manual provisioning</h4><p>The administrator must login to the device provisioning interface (typically HTTP) and change the required parameters. There are several drawbacks to this method:</p></li><li>The IP phone must be connected to the Internet when the administrator is performing this operation.</li><li>The administrator must know the device’s IP address.</li><li>The IP phone must be on the same LAN as the administrator, or on a public IP address (if the device is behind a NAT/firewall, the administrator will not be able to access it).<p> </p><p>Due to these reasons, and since every device must be provisioned individually, this method is acceptable for a testing environment or small-scale service deployment, but totally inappropriate for ITSPs with thousands of IP phones around the world.</p><h4>Auto-provisioning</h4><p>This approach is a fundamentally different one. Instead of attempting to contact an IP phone and change its parameters (pop method), the initiative is transferred to the IP phone itself. The device will periodically go to the provisioning server and fetch its configuration file.</p><h3>IP phone provisioning</h3><p>When you use auto-provisioning for an IP phone, instead of entering the same values for codec, server address, and so on into each of a thousand user agents, you can simply create a profile which describes all these parameters. Then PortaBilling® can automatically create a configuration file for the SIP phone and place it on the provisioning server.</p><p>The only configuration setting which is required on the IP phone side is the address of the provisioning server, i.e. where it should send a request for its configuration file. When the IP phone connects to the Internet, it will retrieve a specific configuration file for its MAC address from the TFTP or HTTP server and adjust its internal configuration.</p><p> </p><p>If you decide later to change the address of the SIP server, you need only update it once in the profile, and new configuration files will be built for all user agents. Each user agent will then retrieve this file the next time it goes online.</p><p> </p><p></p><p> </p><p>The config file is specific to each user agent, as it contains information such as username and password; thus the user agent must retrieve its own designated config file. The following are defined in the billing configuration:</p></li><li>The CPE profile, so that the system knows which generic properties (e.g. preferred codec) to place in the configuration file.</li><li>An entry about the specific IP phone in the CPE inventory (including the device’s MAC address), with a specific profile assigned to it.</li><li>The IP phone (or, in the case of a multi-line device, a port on the phone) is assigned to a specific account in the billing.<p> </p><p>To speed up configuration file generation (e.g. when auto-provisioning large numbers of IP phones (1000 and more)), you can make a parallel processing mode available for this task. To do this, enable the UA_Profiles.Enable_Parallel_Generation option on the Configuration server.</p><p> </p><p>Auto-provisioning will only work if your IP phone knows the address of your provisioning server. If you buy IP phones retail, you will probably have to change the address of the provisioning server on every phone manually. However, if you place a large enough order with a specific vendor, these settings can be pre-configured by him, so that you may deliver an IP phone directly to the end user without even unwrapping it.</p><p> </p><p>Some IP phones can be customized by end users. Thus, end users may wish to configure particular options (e.g. soft keys) according to their preferences. Then, you can perform more specific configurations of IP phone auto-provisioning. In the CPE profiles, you can specify options to be auto-provisioned by PortaSwitch® (e.g. the addresses of SIP servers, codecs, passwords, etc.) and exclude options that end users can configure themselves.</p><p> </p><p>For example, when creating a CPE profile for Audio Codes 405HD, remove such personal settings as programmable keys from the list of options to be auto-provisioned. Then, if end-users configure the programmable keys for their IP phones, those changes remain after the IP phone configuration update. </p><h3>CPE Inventory</h3><p>The CPE inventory allows you to keep track of IP devices (SIP phones or adaptors) which are distributed to your customers. The MAC address parameter is essential for every IP phone which is to be automatically provisioned, and so a corresponding entry must be created in the CPE inventory.</p></li></ul></div></body></html>