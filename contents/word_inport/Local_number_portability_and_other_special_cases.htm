<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"/><title>Local number portability and other special cases</title><meta name="generator" content="Adobe RoboHelp 2019"/><link rel="stylesheet" href="../assets/css/default.css"/><link rel="stylesheet" href="../assets/css/PortaBilling_Admin_Guide_MR82.css"/></head><body><div><h2><a id="_Toc31205418"></a>Local number portability and other special cases</h2><p>While call processing (routing, billing) based on a phone number match to a phone prefix (when each phone prefix defines a group of phone numbers such as 420 – Czech Republic; 4202 – Czech Republic, Prague; 420604 – Czech Republic, T-Mobile and so on) is used in the majority of telecommunications services, in some cases it is not applicable. </p><h3>Local number portability</h3><p>This is a very common example of a situation where the rate or call routing cannot be determined simply by looking at the phone number itself. Local number portability (LNP) is widespread throughout Europe, the US and other countries around the world. It means that when a user migrates from one telco (fixed or mobile operator) to another, he is able to take his existing phone number with him. So although his phone number looks as if it belongs to one company (e.g. mobile operator A), in reality his calls should be routed to another company (mobile operator B). Most importantly, anyone making a phone call to this number should be charged according to the termination rates defined by B.</p><p> </p><p>The only way to determine whether a number has been ported or not is to check it against the ported numbers database. These databases differ for each individual country, and have a variety of formats and access API structures. However, PortaBilling® offers a flexible method for handling LNP, using a system of number translation plug-ins that satisfy the requirements valid in various countries.</p><p> </p><p>A basic plug-in for LNP (where all ported numbers are imported into a local database on the PortaBilling® server) is supplied along with the system. When a call processing request arrives to PortaBilling®, the billing engine checks if the original number dialed by the user is found on the list of ported numbers. If there is no match, call setup proceeds as usual. </p><p>However, let us assume that a customer has dialed a number that originally belonged to the mobile operator Telenor, but was recently ported to another operator, Netcom. In this case, there will be an entry in the LNP table, and the ID of the phone number’s new owner will be extracted (4792, in this example). This ID could be a symbolic name (e.g. Netcom), but usually it is more convenient to use a phone prefix or phone number belonging to that operator. The following will then happen:</p><ul data-start="251" xmlns=""><li>The billing engine looks up routing to a destination identical to the number owner’s ID (4792, in this case), and the call is routed directly to the Netcom network.</li><li>The same ID is used to calculate your termination costs and apply charges to your customer, i.e. he will be charged according to Netcom’s rates.</li><li>The originally dialed phone number is stored in the CDR record, but is linked to the destination used for charging the call. So the end user will see “4791555123 – Norway, Netcom mobile” in the CDR report.</li></ul><p> </p><p>If a different way of extracting information from the LNP database is required for a given country (for instance, real-time lookup in a central database), you can create your own LNP plug-in and use it with PortaBilling®.</p><p> </p><p>The Number_Portability table in PortaBilling® is described in the <a href="#_APPENDIX_D._The">APPENDIX D. The Number_Portability Table Description</a> section.</p><h3>LRN (Local Routing Number) dipping </h3><p>In the United States and Canada, the only way to determine whether a number has been ported is to subscribe to an LRN dipping service that looks up ported numbers in real-time from a remote database. </p><p> </p><p>Since PortaSwitch® is connected with Telnyx, an LRN dipping service provider, it provides this opportunity to determine whether a number has been ported – and it routes the call to the most suitable and most economic vendor.</p><p> </p><p>When a call processing request arrives at PortaBilling®, the following happens:</p><ol data-start="1" xmlns=""><li>PortaBilling® checks the destination number and if necessary sends a request to the LRN service provider (e.g. PortaBilling® will only check US &amp; Canadian numbers and skip the rest).</li><li>If the number is not ported, the provider’s response indicates that the call should be routed, based on the original dialed number. However, let us assume that a customer dials a number (for example, 12063131234), that originally belonged to the mobile operator T-Mobile, but was recently ported to AT&amp;T. In this case, the provider returns the LRN number (e.g. 12065549080) and PortaBilling® uses it to route the call directly to the AT&amp;T network. </li><li>When the call finishes, the same LRN number is used to calculate the termination costs and then the charges are applied to the customer – in this case, according to AT&amp;T’s rates. The number originally dialed is stored in the CDR record, but is linked to the destination used for charging the call. So the end user will see “12063131234 – USA, AT&amp;T” in the CDR report.</li><li>In addition, to improve speed and flow, PortaBilling® will temporarily add an entry for this number and its corresponding LRN number to the list of ported numbers.</li></ol><p> </p><p>Since PortaSwitch® is already interconnected with Telnyx, it can offer a flexible plug-in solution that allows for easy integration with other LRN service providers.</p><h3>Porting numbers from / to PortaBilling® </h3><p>A service provider can now perform the following operations directly from the unified PortaBilling® web interface:</p><ul data-start="254" xmlns=""><li>Port a number to PortaBilling® from another telecom (port-in); </li><li>Port a number from PortaBilling® to another telecom (port-out).<p> </p><p>This feature is convenient for customers who want to change telephone providers but keep their original numbers. This framework provides the option to port numbers via Neustar Inc. – a major player in the number portability market.  </p><p> </p><p>In order to port-in a number, a PortaBilling® user sends a request via the Port in button on the Edit Account page. In the request dialog window the following parameters must be mentioned:</p></li><li>The phone number that the customer wants to use;</li><li>The service password or PIN number of a customer’s account within the previous service provider’s system;</li><li>The date in the PortaBilling® user’s time zone by which this request must be completed;</li><li>The customer’s account within the previous service provider’s system. </li></ul><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image174.png" width="461.5" height="155.5" alt="Port in request"/><br/>‎</p><p>PortaBilling® sends the porting request to Neustar and waits for confirmation. Neustar requests the number from the telecom and when confirmation is received, the number is replaced in PortaBilling® and the customer can receive calls at the new number.</p><p> </p><p>When PortaBilling® receives a port-out request, it searches the account with the requested number. If the account is found, PortaBilling® terminates it and informs Neustar about the number’s availability. Neustar then sends this information to the telecom that requested the number. So now that the ported number belongs to this telecom, calls are routed to the new telecom’s network.  </p><p>NOTE: PortaBilling® automatically provides the requested number (port-out); administrators cannot affect the process.  </p><p>Let’s consider the following example: </p><p> </p><p>John Doe is a customer of X-Telecom and has the number 1212555123. Due to questionable connection quality, he decides to switch from X-Telecom to GlobalNet Telecom. He calls GlobalNet Telecom, asks to use their services, but declares his wish to keep his old number. The GlobalNet Telecom operator informs John Doe that the service will be available starting January 1st. Then the operator creates an 1818123555 account for John Doe in GlobalNet Telecom, makes the porting request via PortaBilling® to Neustar, and when the request is confirmed, the system replaces 1818123555 with 1212555123. So while John Doe continues to use his old 1212555123 number, the calls are now charged according to GlobalNet Telecom’s tariffs.</p><p> </p><p>The PortaBilling® administrator may monitor all requests from his system (the Port-in panel) and to his system (Port-out panel) by clicking the Infrastructure, then Inventory and Number porting buttons on the navigation menu.  </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image175.png" width="460.2" height="177.9" alt="Number porting summary"/></p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/Gear.png" width="38.4" height="38.4" alt="Wor1338"/>NOTE: The Port in button is only available when NumberPorting is enabled on the Configuration server. To use Neustar for number portability, NumberPorting_Neustar must also be enabled.</p><p>PortaBilling® can receive number porting requests via the HTTP / HTTPS protocols.</p><p> </p><p>Thus, this new feature makes it possible for customers to use their original numbers, regardless of the telecom. Number portability works through Neustar Inc., but if necessary, PortaBilling® can collaborate with other number porting companies via additional plug-ins.</p></div></body></html>