<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"/><title>Volume discount plans </title><meta name="generator" content="Adobe RoboHelp 2019"/><link rel="stylesheet" href="../assets/css/default.css"/><link rel="stylesheet" href="../assets/css/PortaBilling_Admin_Guide_MR82.css"/></head><body><div><h2><a id="_Hlk511395481"></a><a id="_Toc31205394"></a>Volume discount plans </h2><p>The volume discount plans tool is great for making automatic price adjustments and allotments. It allows you to adjust prices depending on the volume of services consumed by customers, allocate a certain volume of free services and transfer a balance to a sub-wallet that has been designed for a particular type of service. These are the three main discount schemes: </p><ul data-start="1.88" xmlns=""><li><ul data-start="1.88"><li>Discounts – Using discounts, you can adjust prices depending on the volume of service consumed by customers. This encourages them to use the service more in order to receive the discount (e.g. spend $20 for calls to the UK and get a 30% discount for the next calls during the month). You can also use discounts to make special offers (e.g. new customers receive 50% off for 10 GB of Internet traffic). </li><li>Quotas – With quotas you are able to allocate a defined volume of services for your customers free of charge. A quota is usually combined with a recurring fee (a subscription). For example, provide 100 minutes for calls to Canada and 3 GB of Internet traffic for a $30 monthly fee. </li><li>Service wallets – This tool makes it possible to divide the customer’s balance into virtual sub-wallets. Each sub-wallet is designated for a specific service and destination group. Therefore, money transferred to a sub-wallet can only be used for a specific service (e.g. only for calls to the US or only for sending SMS, etc.). For example, a customer wants to have unbroken access to the Internet even if all his available funds have been consumed by making calls. So the customer tops up his Internet service sub-wallet by $10 using a credit card. The customer receives 5 GB of Internet traffic that can be used even when his available funds reach zero. Service wallets can be topped up via the self-care or administrator web interface.</li></ul></li></ul><p> </p><p>Use these discount schemes separately or combine them with each other to get the best solution for your business model. For instance, your service may include 300 free monthly minutes to US &amp; Canada, 100 free monthly minutes to Western Europe, and a special offer of 15% off calls to India after the customer has called for more than 200 minutes. Each of the conditions above is represented by an individual discount scheme. Taken all together, they will be grouped as volume discount plan “EasyCall,” which can then be applied to a specific account.</p><h3>Discounts</h3><p>Use this discount scheme to provide a discount for a defined usage period – daily, weekly, semimonthly or monthly. When the usage period ends, the discount counters reset. For example, provide a monthly deal of the first 100 minutes for calls to the UK at a standard rate, the following 200 minutes at a 20% discount and all following calls to this destination at a 30% discount. When the next usage period begins, the customer’s calls to the UK are charged the standard rate. </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image91.png" width="461.5" height="222.7" alt="Discount configuration"/></p><p> </p><p>You can also provide one-time discount. This discount type is a great tool for providing a permanent discount with no time limitation. For example, apply this discount type to provide a rate that is 10% cheaper for a wholesale partner.</p><p> </p><p>A detailed description of how the billing engine calculates a discount is considered in the following example: </p><ul data-start="140" xmlns=""><li>You have the discount rule “first 200 minutes – regular rate $0.20/min, 15% discount after 200 minutes” for calls to Israel.</li><li>During one month the customer spends 230 minutes on the phone.</li></ul><p> </p><p>In this case, the customer will be charged 200*0.20 + (30*0.20 – 15%) = 40 + 5.1 = 45.1. Sometimes people get confused, and will assume that the charges in this case should be 230*0.20 – 15% = 39.1, which is incorrect. (In order to provide a discount to the total amount of services consumed use the <a href="#_Bundle_Promotions_1">Bundle Promotions</a> feature). </p><h3>Quotas </h3><p>This is the most common way to provide a set of services for a recurring fixed fee. To do this, create a quota for your service, then create a subscription plan and assign them both to the same product. For example, you can provide a triple-play package that includes quotas such as 1000 minutes for domestic calls, 1 GB of Internet traffic and 150 domestic SMS – for a monthly subscription fee of $40. Once the quota is consumed, the service is unavailable until the following month.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image92.png" width="461.5" height="217.6" alt="Quota bundle"/></p><h3>Service wallets </h3><h4>Service wallet with zero initial balance</h4><p>Sometimes customers want to reserve an amount of money for a specific service so they can freely use their available funds for other services. If a customer runs out of money at some point, the money in reserve remains available and the customer can still spend it only for the needed service. Within a single volume discount plan, the administrator can configure as many service wallets as needed. The volume discount plan can be assigned to a product, a customer or one of their accounts. When assigned, the service wallet with zero initial balance is empty, so in order to use it, the customer or administrator needs to top it up. Alternatively, there is the option of configuring a service wallet with an initial value. </p><h4>Service wallet with an initial balance </h4><p>Use this service wallet scheme to grant a certain volume of service to your customers for one time. For example, grant your IPTV customers 1 GB of Internet traffic free of charge as a promotional offer. Once the traffic is consumed, the customer may decide whether to top up their service wallet for more Internet service or not. </p><h4>Service wallet top up</h4><p>This is a fast and easy-to-use tool to reserve customers’ money for a specific service. The administrator or user can top up the service wallet at any time via their web interfaces. A top up is an efficient way to increase your payment flow since you, as the service provider, can sell a larger volume of service at a lower price. For example, you can offer 10-minute calls to Germany for $3; 50-minute calls for $10 and 100-minute calls for $15. The user selects the most suitable offer among the three options and either tops up his service wallet via the customer / account self-care web interface or requests this service from the administrator.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image93.png" width="461.5" height="217.6" alt="Service wallet configuration"/></p><p> </p><p>Consider the following example:</p><p> </p><p>John Doe is a prepaid customer of EasyCall Inc. To be on the safe side, John Doe wants approximately 10 SMS and about 100 minutes for domestic calls in case he runs out of money using other services. He accesses the customer self-care interface and sees these available options: </p><ul data-start="1.91" xmlns=""><li><ul data-start="1.91"><li>20 SMS for $3 and 50 SMS for $6, </li><li>50 minutes for $5, 100 minutes for $9 and 200 minutes for $15.<p> </p><p>John Doe buys 20 SMS for $3 and 100 minutes for $9, his credit card is charged for $12. Now he can use other available services (e.g. he surfs the Internet and makes international calls) feeling confident that this will not impact his ability to make domestic calls and send SMS messages. </p><p> <img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image94.png" width="462.1" height="203.5" alt="SC quotas and service wallet"/></p><h5>Service wallet top ups using payment processors with external authorization</h5><p>Customers can top up their service wallets by using payment processors that have external authorization such as PayPal, Moneybookers and PayArena. </p><p>NOTE: The PayNearMe external payment processor does not support service wallet top-up transactions and therefore cannot be used for service wallet top ups.</p><p>When a customer initiates a top up from their self-care interface, they are redirected to the payment processor portal to provide their credit card information and confirm payment. Upon payment processing, the customer is redirected back to the self-care interface where they can view the updated service wallet’s balance.</p><h4>Service restrictions for service wallets</h4><p>With PortaBilling® you can fine-tune service provisioning for possible situations like when a customer’s service wallet for accessing the Internet is empty. For this situation, configure the system to:</p></li><li>block service until the customer tops up their service wallet or</li><li>continue to provide service but draw the funds from other applicable service wallets or from the customer’s main balance.</li><li><p> <img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image95.png" width="460.8" height="357.8" alt="Service wallet service restriction"/></p><p> </p><p>Thereby you clearly define the system’s behavior and also facilitate service provisioning.</p><h4>Service wallets with a lifetime</h4><p>One popular business model is to offer service provisioning for a certain period of time. This way, service providers encourage customers to make frequent top-ups so they can keep using the service.</p><p> </p><p>With PortaBilling®, you can introduce this business strategy by using service wallets that have a lifetime. Each top-up extends a service wallet’s lifetime. Once a user makes a top-up, they can use the service for the period defined (i.e. the lifetime), after which it expires. Thus, the more a user tops up, the longer they can use the service. Note that service wallets that have an initial balance defined do not have an initial expiration date (i.e. the initial balance can be used unrestrictedly. It obtains its lifetime from its top-up).</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image96.png" width="461.5" height="357.8" alt="Service wallet expiration"/></p><p> </p><p>If a user tops up a service wallet before it expires and there is an unused quota / balance, it is added to the top-up quota / balance. The service wallet lifetime, however, is not added: if the top-up lifetime is for less time than the current one, the service wallet lifetime is not extended. </p><p> </p><p>Consider the following example:</p><p>You are the Internet service provider and offer the following top-up options with your Start Internet service wallet:</p></li><li>5 Gb for $5 and a lifetime of 2 days</li><li>10 Gb for $8 and a lifetime of 5 days</li><li>25 Gb for $20 and a lifetime of 10 days</li></ul></li></ul><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image97.png" width="462.1" height="289.9" alt="Top-up options"/></p><p> </p><p>John Doe has signed up for the Start Internet product and makes a $5 top up. He sees that he has a 5 Gb Internet quota that is available for 2 days. During the day, he uses 4 Gb, so he needs to make another top up to continue surfing the Internet. He makes an $8 top up and now he has an Internet quota of 11Gb (by adding the unused 1 Gb from the previous top up plus the new top up for 10 Gb) which is available for 5 days. If John Doe does not make another top up in 5 days, he will receive a notification about his quota expiration.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image98.png" width="461.5" height="361.0" alt="Notifications setup"/></p><p> </p><p>Note that if you grant a user some Internet quota (e.g. either as a promotion or compensation for quality issues), it will not affect the service wallet lifetime. Thus, if you provide John Doe with 1 Gb extra, his increased 12 Gb quota will still expire in 5 days.</p><p> </p><p>By offering service wallets with different lifetimes, service providers can introduce marketing campaigns that facilitate service provisioning and boost sales.</p><h3>Best practices</h3><p>The table below matches the most common business cases and discount schemes suitable for them. Use this table to select the proper option for your own business model.</p><p> </p><div align="left"><table border="1.3" cellspacing="0" style="width:470.1px"><colgroup xmlns=""><col style="width:122.13333333333333333333333333px"/><col style="width:228px"/><col style="width:120px"/></colgroup><tbody><tr><td><p>Description</p></td><td><p>Example</p></td><td><p>Scheme</p></td></tr><tr><td><p>The customer receives a permanent discount</p></td><td><p>The service provider grants a wholesale customer an unlimited 10% discount for calls to the US and Canada.</p></td><td><p>One-time discount </p></td></tr><tr><td><p>The customer has a monthly discount for a service </p></td><td><p>The service provider makes a special offer for business customers: “Spend $100 for calls to Germany and get 50% off all following calls to this destination this month.” To receive the 50% discount again for the following month, the customer must spend $100 for calls to Germany at the standard price.</p></td><td><p>Monthly discount</p></td></tr><tr><td><p>The customer receives a defined amount of service free of charge</p></td><td><p>The new subscribers of the “triple play” service receive 2 GB of Internet traffic for free.</p></td><td><p>Service wallet with an initial balance </p><p> </p></td></tr><tr><td><p>The customer pays a monthly fee and receives a defined set of services</p></td><td><p>The customer pays $30 monthly and receives: </p><ul data-start="1.99" xmlns=""><li><ul data-start="1.99"><li>free domestic calls </li><li>30 free minutes for calls to Europe </li><li>100 domestic SMS.</li></ul></li></ul></td><td><p>Monthly quota (+ subscription)</p></td></tr><tr><td><p>The customer wants to maintain a separate balance for Internet service and for international calls</p></td><td><p>The customer’s current balance is $100. At the customer’s request, the administrator transfers $20 from the main balance to the Internet service sub-wallet and $10 to the international calls sub-wallet. The customer receives 5 GB of Internet traffic and 50 minutes for making calls, respectively. </p></td><td><p>Service wallet with zero initial balance</p></td></tr></tbody></table></div><h3><a id="_Quota_/_Balance"></a>Quota / balance allocation for multiple services</h3><p>Allocating separate balances for service usage in service wallets enables you to manage customer funds effectively. At the same time, your revenue increases, since customers top-up several service wallets at a time to access the service. </p><p> </p><p>Another step in service usage management is to allocate a common balance that can be used for a subset of services. For example, allocate a $50 service wallet for domestic calls, SMSs and Internet access and reserve the main balance to be used for international calling. Thereby you introduce quad-play services while monetizing their consumption efficiently. </p><p> </p><p>To narrow down the services available within a common balance, consolidate them into service pools. </p><p>Every service within a pool can be measured differently (e.g. voice calls are measured in minutes, Internet access – in megabytes, etc.). Therefore, service pools are measured in unified virtual units. </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image99.png" width="461.5" height="237.5" alt="Add service pool"/></p><p> </p><p>Virtual units are used to express the cost for using a particular service that is included in the pool (e.g. one minute of calls costs 5 units while an SMS message costs 1 unit). If your pricing changes, you can conveniently re-configure it within the service pool.  </p><p> </p><p>Let’s consider multi-service wallets and quotas, separately.</p><h4>Multi-service wallets </h4><p>Using multi-service wallets, you can allocate a common balance for your prepaid customers and allow them to use it for different services. </p><p> </p><p>Similar to regular service wallets, in the multi-service wallets you can identify the service usage as being either monetary or in units. Encourage customers to use these wallets by introducing flexible top-up schemes (e.g. pay $10 and use domestic services worth $12 or pay $20 and use domestic services worth $25). Then when a customer tops-up their multi-service wallet, they can use it for any of the services included in the wallet while their main balance remains intact.</p><p> </p><p>To illustrate how multi-service wallets function, consider the following:</p><p> </p><p>You want to distinguish voice calls and domestic SMS delivery from international calls. To do this, create a “Home Plan” service wallet that includes Voice calls and Messaging services. </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image100.png" width="461.5" height="191.4" alt="Create multi service wallet"/></p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image101.png" width="461.5" height="163.9" alt="top-up configuration"/></p><p> </p><p>Prepaid customer John Doe lives in Canada and has $5 worth of available funds. He signs up for the “Domestic Services” product and tops-up his service wallet with $10. Each time John makes a call or sends SMSs to Canadian numbers, his $10 decreases.</p><p> </p><p>When John calls his mother in Australia, his $5 worth of available funds decreases. </p><h4>Quota consumption for multiple services</h4><p>In some cases, you may not wish to reveal your pricing strategy to customers and / or competitors (e.g. prices are temporarily reduced to promote your triple-play service bundles and attract customers). Multi-service quotas work well for those cases. You offer customers quota consumption in virtual units and at the same time, flexibly define the pricing for each included service and re-configure it when needed. </p><p> </p><p>Consider the following example:</p><p>Your “Paradise-100” quota provides 100 monthly units and includes services that are rated as follows:</p><ul data-start="1.102" xmlns=""><li><ul data-start="1.102"><li>Voice calls to USA &amp; Canada destinations – 3 units / minute;</li><li>Voice calls to Europe – 10 units / minute;</li><li>SMSs worldwide – 1 unit / message.<p> </p><p>Customer Jane Doe signs up for this quota and starts using it. She calls her mother in New York for 10 minutes – so her quota decreases by 30 units, leaving 70 units available. After she makes a 5-minute call to a friend in the UK and sends 2 SMSs, she still has 18 units available for the month.</p><p> </p><p>To fine-tune the service configuration further for your customers, combine the multi-service quota with regular quotas or service wallets. </p><p> </p><p>For example, you provide domestic calls and SMSs within a multi-service quota while Internet access is provided from a separate service wallet. Thus, whenever a user makes a domestic call or sends an SMS, the quota counters adjust; and when they access the Internet, their service wallet balance decreases.</p><p> </p><p>With this solution, service providers gain additional flexibility with their pricing and service management, and can be more competitive in the telecommunications market. </p><p> </p><p>Customers, in turn, can form their own service usage patterns regarding on-demand consumption of units. In addition, topping-up a single service wallet saves time and increases customer loyalty to the service provider. </p><h3>Mandatory parameters of discount rules </h3><p>A discount rule is a set of parameters such as the service, thresholds, usage periods, etc. that defines how a discount scheme impacts billing for services. There are three mandatory parameters for each discount rule:</p><p> </p><p>Service – This parameter defines which service a discount, a quota or a service wallet is applied to. Select a desired service from the list that represents all available services in your billing environment. Note that within the same volume discount plan you can combine multiple discount rules for different services.</p><p>Destination group – This parameter defines a destination group (a list of prefixes) that will be used in a volume discount definition. For example, if you wish to provide special rates for calls to Eastern Europe you can create a destination group that will contain prefixes for Russia, Ukraine, Belarus, etc. If a customer makes a phone call to 3806325551234 and a matching rate is defined in his tariff for the prefix 380632 (Ukraine, Mobile), the billing engine will search whether any discount rules in the volume discount plan are assigned to a destination group containing the prefix 380632.</p><p>NOTE: Within the same volume discount plan you can only select the destination groups that belong to the same destination group set.</p><p>Threshold type – Discounts, quotas and service wallets can be configured based on the consumed volume of service (e.g. minutes, Mb, SMS) or on the service cost (note that this cost is calculated using a regular rate). For example, you can use thresholds based on call time (e.g. 10% discount after 200 minutes) or on the call cost (10% discount after more than $10 worth of calls).</p><h3>Phone number matching in volume discount plans</h3><p>When volume discount plans are involved alongside “normal” rating as per the tariff plan, the billing engine must match the ID of the service used (e.g. the phone number dialed) with one of the destination groups used in the volume discount definition. The following volume discount plan lookup modes allow PortaBilling® to be fine-tuned for each individual case.</p><h4>Same destination as rate </h4><p>This requires exactly the same prefix as the one in the tariff in order to be used in the destination group for the volume discount definition. For instance, if a customer makes a phone call to 4206025551234 and a matching rate is defined in his tariff for 420602 (Czech Republic, Mobile), the billing engine will search whether any discounts in the volume discount plan are assigned to a destination group containing 420602. </p><h4>By prefix or rate destination</h4><p>Using this mode, the billing engine will look not for the exact same prefix, but rather for a destination group which contains a matching prefix. So if a call is made to 4206025551234 and there is a 420602 rate applied in the tariff, the billing engine will search for a destination group in the volume discount plan that includes a prefix matching 420602; such matching prefixes could be 420602, 420, or even 4. In this case you could just enter 420 in your volume discount definition, and it will then be used for calls rated by different tariff rates (e.g. 4202 and 420602).</p><p> </p><p>Therefore, with this mode you can avoid listing all applicable prefixes (420, 4202, 420602, etc.) in a destination group. However, such extensive lookups put a higher load on the billing engine, so they should be used with caution, and only in volume discount plans where they are truly needed.</p><h4>By full rating pattern match </h4><p>Another possibility is a full rating pattern match. This method disregards the destination used in the tariff entirely, and simply performs a lookup of applicable destinations in the volume discount plan using the phone number dialed by the customer. This is done in the same way as a rate lookup is done in a tariff; thus if the customer dialed 4206021345678, the billing engine will choose a discount with a destination group that includes 420, 420602, or any other destination matching the dialed number. Since several matches can potentially be found (e.g. a first discount is defined for destination group A, which includes 420, and a second discount for destination group B, which includes 420602), the longest match is used (in our example, this would be the second discount). As noted above, this is obviously the most resource-intensive option. </p><h3>Usage periods</h3><p>In order to provide more flexibility for creating new products, some of the discount schemes have their own “usage period” for each destination group. This period defines how often the volume discount counter is reset so that the customer starts with the first available discount level. This way the customer gets another pool of “free minutes” or, alternatively, the customer is returned to the standard rate and must send more calls through in order to obtain a discounted rate. </p><p> </p><p>Typically you use the same discount usage periods as the customer’s billing cycle (so his free minutes “reset” when an invoice for the previous period is generated).</p><p> </p><p>It is possible to apply usage periods that do not match billing periods: for example, 10 free minutes of calls to mobiles per day while the customer has a monthly billing cycle. Another common example is a “fair usage” policy for Internet access: although the user is not charged for the total amount of data transferred during a month, only 1GB of data is allowed to be downloaded per day, following which the bandwidth is severely limited.</p><h3>Rollover of unused traffic</h3><p>If at the end of the usage period (e.g. at the end of the month) there is unused traffic left (i.e. minutes, Internet traffic, messages, etc.), it can be rolled over to the next usage period. </p><p> </p><p>For example, a customer has signed up for 100 bundled monthly minutes of free calls to Canada. By the end of the month, only 90 minutes have been used up. The 10 minutes remaining are rolled over to the next month, so during the next month 110 free minutes will be available for the customer. </p><p> </p><p>The following example illustrates how rollovers work:</p><p> </p><p>You create a discount rule with two rollovers and a monthly usage period.  The unused traffic left over from the first month is rolled over to the second month and if not used completely, to the third month (two rollovers). If unused traffic is not completely used by the end of the third month, it expires.</p><p> </p><p>If unused traffic from two or more usage periods is rolled over to the next one, the quota with the earliest expiration time is used first. Note that unused traffic cannot be rolled over more than three times.</p><h3>Volume discount plan priorities </h3><p>A volume discount plan can be applied to the following entities:</p></li><li>Main product. For better management, you can associate a volume discount plan with a certain product. This volume discount plan will then be applied by default to every account using this product. </li><li>Add-on product. There is an option for assigning a volume discount plan to an add-on product. When several add-on products with volume discount plans are assigned to an account, the volume discount plans are sorted according to the add-on products’ priority.</li><li>Customer. Volume discount plans may also be assigned at the customer level. In this case, they would apply to the services consumed by any of the customer’s accounts. </li><li>Account. You may directly assign an individual volume discount plan to a particular account. </li></ul></li></ul><p> </p><p>If the account and the customer both have volume discount plans assigned for the same service and destination group and with the same threshold type, the discount plans are sorted according to their priorities. The priority is determined as follows (from the highest to the lowest):</p><ul data-start="142" xmlns=""><li>Volume discount plans assigned directly to an account.</li><li>Volume discount plans assigned to an add-on product. </li><li>Volume discount plans assigned to the main product.</li><li>Volume discount plans assigned to a customer.<p> </p><p>The volume discount plan with the higher priority in the list defines the way the next applicable volume discount plan with lower priority will combine with it. </p><p> </p><p>The following example will help clarify how it works:</p><p> </p><p>An account has a list of volume discount plans: one plan is directly assigned to an account, another is assigned via an add-on product and the last one is assigned via a main product. Thus, a volume discount plan assigned directly to an account takes the highest priority and defines how a volume discount plan added via an add-on product is combined with it. Then the volume discount plan that’s assigned to the account via the add-on product, in turn, defines the way the volume discount plan that was added via the main product is combined with it. If any one volume discount plan applicable to a session is used up, the remaining volume discount plans are combined following the same rule.  </p><h3><a id="_Modes_for_Combining"></a>Modes for combining discounts</h3><p>There are several ways that discounts can be combined with each other. These are defined within the Combine with other discounts list and can be one of the following: </p></li><li>Never </li><li>Always</li><li>When discount lower than 100% is active </li><li>After reaching the last threshold limit.</li></ul><h4>Never</h4><p>This mode of combining provides full override. It implies that a higher priority volume discount plan prevents the use of all lower priority ones. This means that even if the higher priority one is used up, the lower priority volume discount plans are ignored.</p><h4>Always</h4><p>Using this mode of combining, discounts are summed up to 100% (there is no money back for a consumed service). For example, two 30% discounts will result in a 60% final discount; 70% + 40% discounts will result in a 100% final discount; 100% + 30% discounts will result in a 100% final discount.</p><p> </p><p>This mode of combining is also applicable to discounts that have different priorities. For example, the volume discount plan Premium provides a 20% discount for calls to the USA and is assigned to an account (the highest priority). The volume discount plan Basic provides a 10% discount for calls to the USA and is assigned to the customer (the lowest priority). To apply both discounts to the end user simultaneously, the volume discount plan Premium must have the combination mode Always applied to it since its priority is higher. If it does, the user can make calls to the USA using a 30% discount (20% + 10%).</p><p> </p><p>In contrast to the Never mode of combining, the Always mode only applies to a volume discount plan that follows according to priority. For example, let’s add another volume discount plan to the previous example. The Standard volume discount plan provides a 50% discount for calls to the USA, has the combination mode Never and is assigned to the add-on product. Thus, its priority is lower than Premium, but higher than Basic. Altogether, the user’s discount will be 70% (20% + 50%), and the 10% discount will never be applied.</p><h4>When discount lower than 100% is active </h4><p>If a higher priority volume discount plan has a threshold with a 100% discount defined within it, only this volume discount plan is applied to a session until the 100% discount threshold is used up. Only after the volume of the consumed service exceeds the 100% discount threshold can the rest of the discounts be applied. If discounts defined in both the higher and the lower priority volume discount plans are applicable to the same call, they are summed up to 100%. For example, Germany discounted calls by 100% exclusively for 50-minute calls only are followed by a 50% discount for 1000-minute calls, while another discount for the EU offered a 30% discount. The EU discount would only become applicable if the 50 minutes are completely used, and then for a call to Germany, the total discount will be 30 + 50 = 80%.</p><h4>After reaching the last threshold limit </h4><p>A higher priority volume discount plan prevents the use of lower priority ones until its “unlimited” threshold is reached or the last (i.e. biggest) threshold is exceeded (regardless of discount value). For example, calls to Germany, discounted by 100% exclusively for 50 minutes are followed by a 50% discount for 1000 minute calls, while another (lower priority) volume discount plan for the EU offered a 30% discount. For calls to Germany the EU discount would only become applicable if the full 1050 minutes are used.</p><p> </p><p>Let’s have a look at the following example: </p><p> </p><p>Your customer has account number 12126505550 in PortaBilling®. This account is assigned a main product that sets the rates (so that calls to the US&amp;Canada cost $0.2/min) and two add-on products with different priority levels. Each add-on product includes a volume discount plan: </p><ul data-start="1.109" xmlns=""><li><ul data-start="1.109"><li>A 50% discount on calls to the US for the first 60 minutes (add-on product with a high priority level; method of combining after reaching the last threshold limit).</li><li>A 100% discount on calls to US&amp;Canada for the first 20 minutes (add-on product with a medium priority level).</li></ul></li></ul><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image102.png" width="461.5" height="222.7" alt="whole discounts available"/></p><p> </p><p>The account number 12126505550 makes the next calls:</p><ol data-start="1" xmlns=""><li>First, to Canada – for 15 minutes – it is charged using the “US&amp;Canada” volume discount plan and comes to $0.0.<p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image103.png" width="461.5" height="222.7" alt="Calls to Canada"/></p><p> </p></li><li>Then, to the US – for 20 minutes – it is charged using the “USA Cheap” volume discount plan (since it has a higher priority level) and comes to $2 (20 * 0.2 * 50%).<p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image104.png" width="461.5" height="222.7" alt="Calls to the US at 50%"/></p><p> </p></li><li>Finally, to Canada – for 10 minutes – it is charged using the “US&amp;Canada” volume discount plan, but only for 5 minutes which comes to 5*0 = $0.0, and then for 5 minutes without a volume discount plan which comes to $1 (5*0.2). </li></ol><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image105.png" width="461.5" height="202.3" alt="All discount to Canada used up"/></p><p> </p><p>This functionality allows the service provider to offer a flexible product portfolio that can be custom-tailored to market requirements and increase revenue via the sale of a la carte monthly calling plans.</p><h3><a id="_Hlk514771987"></a><a id="_Hlk498502936"></a>Prorated thresholds in volume discount plans</h3><p>If service is used during an incomplete billing period (e.g. customer signs up on April 20th and there are only 10 days left in the April billing cycle) then the volume discount thresholds can be prorated according to the duration of the period when service was actually used. </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image106.png" width="462.1" height="316.8" alt="Enable Prorate thresholds for first usage period option"/></p><p>   </p><p>Let’s consider a few usage examples:</p><ul data-start="150" xmlns=""><li>Regular discounts – A volume discount plan offers no discount for the first 100 minutes, a 10% discount for up to 200 minutes and a 20% discount after 200 minutes. The volume discount plan has a weekly usage period. If a user signs up for this plan on Wednesday then the first threshold is 71 minutes and the second threshold is 143 minutes since only 5 days remain in the current usage period. Thresholds are then 100 and 200 minutes for the next week and thereafter.</li></ul><ul data-start="1.111" xmlns=""><li><ul data-start="1.111"><li>Change of volume discount plan – Let’s say Richard Roe switches over to a new product on November 15th that has a quota of 100 minutes. Richard receives 53 minutes (100*16/30=53) of free calls for November.</li></ul></li></ul><p> </p><p>Pay attention to how a volume discount plan is prorated when assigned on the last day of a current billing period:</p><ul data-start="151" xmlns=""><li>before 10:59 p.m. – services are available during the entire day. The quota is prorated, bringing the available amount of services for the whole day;</li><li>after 11:00 p.m. – services are unavailable till midnight. The quota is prorated when the following billing period begins.<p> </p><p>With this feature you can provide your customers with correct billing for incomplete volume discount usage periods, thus preventing your business from revenue losses.</p><h3><a id="OLE_LINK1"></a>Change of volume discount plans for customer / account</h3><h4>Preserving the counters</h4><p>You can change a volume discount plan and preserve its counters for a new volume discount plan. This enables you to provide a single continuous offer to your end users with the option for adjusting / updating it at any time. To preserve the counters, ensure that both volume discount plans satisfy the following conditions: </p></li><li>A destination group is identical and belongs to the same destination group set (e.g. both volume discount plans apply to the US &amp; Canada destination group from the North America destination group set).</li><li>Identical service (e.g. for both discounts the service is defined as Voice Calls).</li><li>Identical threshold type (e.g. the provided discounts are based on the session cost).</li><li>Identical usage period (e.g. both discounts have one-time usage or are reset monthly).</li><li>The Prorate thresholds for first usage period option is enabled or disabled (e.g. when assigned in the middle of a billing period both discounts are recalculated depending on the number of days left until the end of the current billing period). </li><li>Both volume discount plans must have the same priority level (e.g. the previous and new volume discount plans are associated with the main product or add-on products at the same priority level);</li><li>The volume discount plan change must be done as a single operation. To do this, remove the old volume discount plan, assign a new one and click Save.<p> </p><p>Note that when you change the volume discount plan via an add-on product, you can: </p></li><li>Replace the already active add-on product with the new one. <a id="_Hlk504577681"></a>PortaBilling® applies the volume discount plan that’s defined in the new add-on product at once.</li><li>Schedule when the new add-on product will be activated. PortaBilling® will replace the active add-on product with the new one on the stated date.</li></ul><p> </p><p>If all conditions are met, the counters of the previous volume discount plan are preserved for use with the new one. Otherwise, PortaBilling® resets the counters. The following examples represent how changing the volume discount plans works when the counters are preserved:</p><h5>Identical pre-condition </h5><p>The service provider offers two bundles – 50 and 100 free domestic SMS messages with the identical pre-condition: valid after sending 25 SMS per month without a discount. A user subscribes to the 50 free SMS bundle. He has already sent 25 SMS without a discount plus 10 SMS out of 50 available and wants to upgrade to 100 free domestic SMS messages this month. He switches over to a new SMS bundle and since he has already sent 35 SMS messages, 140 (100+50-10) free domestic SMS are available for him immediately after the volume discount plan change.</p><h5>New quota is smaller</h5><p>A user uses up 9 GB and switches over to a new 7 GB product. He is not able to browse the Internet until the end of the month and starting from next month, he will only have a 7 GB Internet traffic quota available. The newly assigned volume discount plan will show the status Used in Full until it is reset.</p><h4>Change of pro-rated volume discount plans </h4><p>If a volume discount plan is changed / assigned before 10:59 p.m., the day of change / assignment is included in the proration for the newly assigned plan. Let’s consider when a volume discount plan is:</p><ul data-start="1.112" xmlns=""><li><ul data-start="1.112"><li>changed in the middle of a billing period; or</li><li>assigned on the last day of a billing period.<h5>Volume discount plan change in the middle of a billing period</h5><p>Consider these examples when counters for the previous volume discount plan are preserved for use with the new one.</p></li><li>Mary Smith is granted 60 minutes of free calls. By November 15th she wants to upgrade to a new quota of 100 minutes. She switches over to the new product and since she made 20 minutes’ worth of calls during 14 days, there are still 8 minutes (60*14/30-20=8) available from the previous quota. The newly assigned quota is prorated for the 16 days left till the end of the month (100*16/30=53). With the unused minutes from the previous quota added, Mary receives a total of 61 minutes (8+53=61) of free calls for November.<p> </p></li><li>Mark Johnson does something similar. He made 59 minutes’ worth of calls (almost the whole quota) during 14 days, so 31 minutes (60*14/30-59=-31) would be deducted from the new prorated quota (100*16/30=53). Thus Mark only has 22 minutes available (-31+53=22) till the end of November. <h5>Volume discount plan assignment on the last day of a billing period</h5><p>If a volume discount plan is assigned on the last day of a current billing period:</p></li><li>before 10:59 p.m. – services are available during the entire day. The quota is prorated, bringing the available amount of services for the whole day;</li><li>after 11:00 p.m. – services are unavailable till midnight. The quota is prorated when the following billing period begins.</li></ul></li></ul><p> </p><p>For instance, John Doe has a monthly billing period. At 6 p.m. on April 30th (the last day of his billing period) he assigns an add-on product that contains a quota of 100 minutes of free international calls. As a result, John receives 3 minutes of free calls (100*1/30=3), since the quota was prorated for the last day.</p><p>NOTE: You can change both the threshold and the combination (Combine with other Discounts) option within the same discount and still transfer the volume of consumed discount. Please refer to the <a href="#_Modes_for_Combining">Modes for Combining Discounts</a> section for detailed information about combination options.</p><h4>Volume discount plan change using the API methods</h4><p>To change a volume discount plan using the API, use the following methods: </p><ul data-start="162" xmlns=""><li>To change volume discount plans included in the main product use the i_vd_plan property in the Update_product method; </li><li>To change volume discount plans for a particular customer use the i_vd_plan property in the Update_customer method; </li><li>To change volume discount plans associated with add-on products use the assigned_addons structure in the Update_account method. When using this method, the assigned_addons structure must contain the complete list of add-on products applicable to an account (i.e. the add-on products that will not be changed plus new add-on products that must be assigned to an account).<p> </p><p>Please refer to the <a href="http://portaone.com/support/documentation/">PortaBilling XML / JSON API Reference Guide</a> for more information about API methods.</p><h3>Peak and off-peak periods </h3><p>By default, volume discount plans are applied irrespective of peak and off-peak periods, i.e. a minute is always counted as a minute. It is possible to create a volume discount plan with a different structure of discount thresholds for peak and off-peak time (and even for first and second off-peak periods). In this case, only counters for the relevant portion of the volume discount plan will be modified, based on the time when the service is used.</p><p> <img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image107.png" width="461.5" height="252.8" alt="Separate off-peak thresholds  "/></p><h3>Threshold warnings</h3><p>It is possible to configure the system so that a customer crossing a discount threshold (where a new discount level is applied) would automatically receive a notification. This could be used to notify the customer that he is either approaching the end of his discount provisioning or is now out of free minutes, or inform him that he is now eligible for a higher discount.</p><h4>Customer notification before reaching a volume discount threshold</h4><p>You can notify your customers that they are reaching the threshold for when a current discount stops being provided to them. </p><p> </p><p>When a consumed volume of service reaches its warning threshold, as defined by an administrator for a particular discount, a corresponding notification is delivered to the customer by email or SMS. </p><p> </p><p>Consider the following example:</p><p> </p><p>A customer wants to sign up for 200 free minutes of calls to Canada. Moreover, he asks to be notified when he is down to only 20 free minutes. An administrator creates a volume discount plan for him that provides 200 minutes of free calls for Canadian destinations and then configures the requested customer notifications: to inform him when he has used up 180 minutes and again, when the whole 200 minutes are used up. </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image108.png" width="622.2" height="549.8" alt="quota notifications"/> </p><p> </p><p>Then he assigns this volume discount plan to the customer’s account. When the customer has used up 180 of the 200 minutes for outgoing calls, he is notified by email accordingly.</p><p> </p><p>NOTE: It is possible to specify warning thresholds only for value-defined quota or discount thresholds, i.e. notifications cannot be defined for unlimited calls within a volume discount plan.</p><p> </p><p>Sending threshold notifications to your customers gives them a clear idea of the amount of services consumed and other charges. And it may also encourage them to buy additional discounted service bundles, thus raising your sales revenue.</p><h3>Crossing discount thresholds and split xDRs</h3><p>It may happen that a session (e.g. voice call or broadband Internet connection) spans several discount thresholds. For instance, a volume discount plan provides 100 free minutes of calls per month, after which the regular rate ($0.10/min) is charged. </p><p> </p><p>The customer has used up 98 minutes already, and then makes a phone call which lasts for 8 minutes. In this case, the first two minutes of this call are covered by the 100% discount and the normal rate applies to the remaining six minutes.</p><p> </p><p>By default, an aggregated discount is calculated based on the rates/discounts applicable for each individual portion of the session and the duration of each portion.  In our example the aggregated discount is: 100% * (2/8) + 0% * (6/8) = 25%. A call is then charged based on the total duration, the discount is applied and a single xDR is produced. In this case the amount charged for is: 8 minutes * $0.10 – 25% = $0.60.</p><p> </p><p>A single xDR record makes it a bit more difficult to understand how the charges are calculated, but it correctly reflects the fact that the customer only used the service once.</p><p> </p><p>If the Split xDRs option is activated for a particular discount level in the volume discount plan, then a session which crossed a threshold will produce multiple xDR records, each linked to the applicable discount level/rate. </p><p> <img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image109.png" width="461.5" height="334.7" alt="Split xDRs"/></p><p> </p><p>In our example it is:</p></li><li>xDR #1: 2 minutes * $0.10 – 100% = $0.0</li><li>xDR #2: 6 minutes * $0.10 – 0% = $0.60</li></ul><p> </p><p>As you can see, the total amount charged is the same in both cases ($0.60); it is just a question of which xDR presentation is better for your end users. </p><h3><a id="_Toc31205395"></a>Transfer of funds and airtime among end users </h3><p>Transfer of funds and airtime among end users is a very popular service, especially in countries where payment systems are scarce. Money transfers provide a fast and convenient way to pay for everything without cash and / or credit cards. </p><p> </p><p>With the transfer of funds and airtime feature, end users are able to:</p><ul data-start="1.118" xmlns=""><li><ul data-start="1.118"><li>transfer their available funds to pay for goods and services, and</li><li>share airtime from their service wallets with friends and family.<p> </p><p>End users can take advantage of this service via their self-care interface. They can select what to transfer: either money or airtime (minutes, SMSs, GB, etc.) from their service wallet. Then they enter the recipient’s phone number. For security purposes, each time a user initiates a transfer, the system sends an email or an SMS with a verification code. This code expires in 3 minutes and becomes invalid after the 3rd ineffective attempt to enter it. This is a safety provision to protect users from unauthorized persons obtaining access to verification codes. </p><p> </p><p>As soon as an end user inputs a verification code to the system and the operation is successful, funds or airtime are transferred to the recipient.  </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image110.png" width="460.8" height="183.7" alt="Transfer funds SC"/></p><p> </p><p> <img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image111.png" width="461.5" height="170.3" alt="Transfer funds"/> </p><p> </p><p>Let’s consider a transfer of funds and airtime, separately.</p><h4><a id="_Hlk514675942"></a><a id="_Hlk514675929"></a>Transfer of funds </h4><p>To prevent fraud, an administrator only enables the transfer of funds for an individual customer or a customer class.</p><p> </p><p>End users who have credit accounts (with individual credit limits) or debit accounts can transfer their available funds from their self-care interfaces. This is very convenient, since it encourages them to manage their funds efficiently, and be ready to either top-up their relatives’ balances or pay for goods in a shop.</p><p> </p><p>For instance, let’s say the user Richard Roe has $50 worth of available funds. He decides to transfer $35 to pay for goods in a grocery store. Richard Roe visits his self-care interface, enters the phone number of the grocery-store owner and the amount of money to be transferred – $35 in this case. He receives an SMS with a verification code and immediately enters that into the system. The system accepts the code and funds are withdrawn from his account. The grocery-store owner receives $35 and Richard’s available funds are now $15. </p><p> </p><p>If an end user makes a transfer by mistake, an administrator can reverse the transaction.</p><h4>Transfer of airtime</h4><p>Transfer of airtime involves the transfer of the contents of any service wallet – minutes for calls, SMSs, GB of Internet traffic, etc. The transfer is only allowed among end users having identical volume discount plans. This is a safety measure to prevent service abuse (e.g. when end users sign up for cheap products and then transfer airtime to use for premium products or commercial purposes).</p><p> </p><p>Service providers encourage end users to make frequent top-ups to provide for the transfer of airtime.</p><p> </p><p>For instance, Jane Smith and her friend have identical service wallets that include Voice calls and Internet traffic. As the friend spent all his service wallet balance on Internet traffic, Jane Smith transfers 2 GB so they can continue chatting via the Internet. Afterwards, Jane finds out that her own service wallet ran out of money too, so she tops up her service wallet.</p><h4>Favorites list</h4><p>End users may create a favorites list that includes recipients they are accustomed to cooperating with. The list is easy to manage, and transferring funds and / or airtime can be done with just a few clicks. This saves time and makes the transfer process more user-friendly.  </p><p> </p><p>For example, returning to Richard Roe, let’s say he visits the grocery store every week and pays for his goods by transferring funds. To have the grocery-store owner’s contact information at hand, he includes it in his favorites list. Next time he goes grocery shopping he just selects the owner’s account from the list and transfers the money. It’s that simple and efficient.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image112.png" width="460.8" height="169.6" alt="Tranfer recipient selection"/> </p><h4>Implementation specifics</h4><p>In conclusion, the transfer of funds and airtime feature has the following implementation specifics:</p></li><li>Both sender and recipient must be allowed to transfer funds.</li><li>Only debit and credit accounts with individual credit limits can transfer and receive funds.</li><li>To allow accounts to transfer and receive funds, enable this option either at the customer or customer class level.</li><li>The currency of the sender and recipient must be the same.</li><li>Only accounts with identical service wallets can transfer and receive airtime. </li><li>To allow airtime exchanges, enable this option within the service wallet.<p> </p><p>This solution enables service providers to increase their revenue by encouraging their end users to frequently top up their service wallets and their main balance to be ready for transferring money to their families and friends. Since no payment system is required to transfer funds and / or airtime, the service is widely used.</p><p> </p><p>In addition to being an easy and secure way to pay for goods and services it encourages users to register new accounts. Thus, service providers also expand their customer base.</p><h4><a id="_Hlk16081249"></a>API to transfer airtime among service wallets and quotas </h4><p>CSPs can allow their users to transfer airtime among their service wallets and quotas in such forms as GB, minutes, SMSs and money, etc. </p><p> </p><p>Since the way that users transfer airtime may differ, the transfer is performed via the API. To do that, CSPs must develop custom self-care portals or mobile apps.</p><p> </p><p>Consider the following specifics:</p></li><li>The lifetime of transferred airtime synchronizes with the lifetime of the recipient’s service wallet / quota.</li><li>The transferred airtime is always used up first.</li><li>To allow airtime transfer, enable this option within the service wallet / quota for both sender and recipient.</li><li>The measured volume of service wallets / quotas must be identical (e.g. GB, minutes and money).</li></ul></li></ul><p>Both sender and recipient must have the service wallet / quota assigned either to the product or directly to their accounts in PortaBilling®.</p><p> </p><p>For instance, let’s say that John Doe has 2 GB rolled-over quota from the previous month that expires on August 10. John opens his custom self-care interface and transfers these 2 GB to Mary’s service wallet. Now Mary can use this quota until her service wallet expires, on August 28. Both John and Mary receive email notifications about the successful transfer.</p><p> </p><p>To transfer airtime among service wallets and quotas using the API, use the make_transaction method of the Discount plan information service. For more information refer to the <a href="http://portaone.com/support/documentation/">PortaBilling® XML / JSON API Reference Guide</a>.</p><p> </p><p>With this feature, users can manage the airtime they’ve paid for and use it in full. This increases their loyalty and makes CSPs more competitive in the market.</p></div></body></html>