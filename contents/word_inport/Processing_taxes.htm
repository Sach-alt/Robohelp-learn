<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"/><title>Processing taxes</title><meta name="generator" content="Adobe RoboHelp 2019"/><link rel="stylesheet" href="../assets/css/default.css"/><link rel="stylesheet" href="../assets/css/PortaBilling_Admin_Guide_MR82.css"/></head><body><div><h2><a id="_Processing_taxes"></a><a id="_Toc31205461"></a>Processing taxes</h2><p>There are two methods for calculating taxes: inclusive and exclusive. Inclusive means that the rate in the price list is defined with all the applicable taxes included; so then a single xDR is produced, and the total amount in the xDR includes both charges for services and the taxes applied to them. In the exclusive method, the rate is defined without any taxes, and the total amount in the xDR includes only charges for services. Taxes are calculated later on, and added as separate xDRs.</p><p> </p><p>With PortaBilling® you can use both methods simultaneously to produce the same final result. In the examples given below, you will notice that, although different taxation methods are used, the information on the invoice looks the same. Deciding which method to use for a specific group of customers depends on various aspects of the two methods, which are explained in detail below.</p><h3><a id="_Hlk7510091"></a>Inclusive rate (single xDR containing charges and tax)</h3><p>When you enter rates into PortaBilling®, you can define them in such a way that they incorporate the necessary charges and applicable taxes. For example, if your price is $0.10 per minute and there is 20% VAT, the rate will be entered as $0.12 ($0.10 + 20%), as illustrated below. When the customer is charged, the total amount in the xDR will then include the appropriate amount of taxes. In our example below, the customer makes a 15-minute call, which is charged at $1.80 – this amount includes both service charges and taxes.</p><p> </p><p></p><p> </p><p>When the invoice is created, the tax information must be properly presented to the customer. Since the total amount of the invoice and the tax rate are known, the actual amount of tax and the pre-tax amount can be “back-calculated”. In our example, we assume that there was only one charge during the billing period, so that the invoice total is also $1.8; but it works exactly the same way if there are multiple transactions in the billing period, too. By applying the tax calculation formulas, PortaBilling® determines that, since the invoice total is $1.80 and the tax rate is 20%, the pre-tax amount was $1.50 and the amount of tax $0.30.</p><p> </p><p></p><p> </p><p>This method is ideal for prepaid services. Since every xDR produced contains the tax amount, charges and taxes are debited from the customer’s balance immediately after the service is rendered. This is also convenient for European countries, where customers are used to seeing all prices as “final.”</p><p> </p><p>The inclusive rate functionality is available with these taxation plugins:</p><ul data-start="1.451" xmlns=""><li><ul data-start="1.451"><li>Fixed VAT rate;</li><li>Custom taxation.</li></ul></li></ul><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image239.png" width="460.8" height="206.7" alt="Enable the “Tax included into rates / fees” option"/></p><h3>Exclusive rate (separate xDRs for charges and taxes)</h3><p>In this case, the prices you enter in the system exclude any tax information, and so when PortaBilling® processes a billing event, the charged amount recorded in the xDR is likewise exclusive of tax. Instead, the taxation process is launched later, when closing the billing period for a given customer (this is actually the final step in closing the billing period process, after all other operations, such as charging recurring subscription fees, have been completed). All the customer’s transactions during the billing period are retrieved and analyzed, and the appropriate taxes are assessed. These tax charges are added to the customer’s account as separate records (xDRs), and then appear on the invoice along with the other charges. </p><p> </p><p></p><p> </p><p></p><p> </p><p>This method allows greater flexibility when dealing with complex taxation (for instance, when the tax is not simply a percentage of the price). It is more suitable for postpaid customers, since tax amounts are applied to the balance only at the end of the billing period. It is also the preferred method for customers in the US and Canada, who are used to seeing prices without tax and having tax amounts added to a bill separately. </p><p> </p><p>Since taxation rules differ from country to country, PortaBilling® supports a system of plug-in tax modules. When you configure a taxation plug-in for a customer class, you instruct PortaBilling® how to calculate and apply taxes to your customers: as either included or excluded in the rates. </p><p> </p><p>Currently, PortaBilling® supports plug-ins for VAT (fixed percentage) and custom taxation, as well as the EZtax® suite, Avalara and the SureTax® taxation plug-ins. The latter three enable correct calculation of US state, country and city taxes, as well as special items such as federal USF, etc. </p><h4>Unified invoice templates</h4><p>Since taxes are configured by customer classes, the invoice templates in PortaBilling® are unified and apply to all taxation plug-ins. This makes invoicing configurations transparent and simplifies customer management.</p><p> </p><p>Previously configured invoice templates are preserved for backward compatibility for information purposes and are available as read-only.</p><h4>VAT</h4><p>Fixed VAT rate is a taxation system that is used worldwide. The Fixed VAT Rate allows you to add a certain percentage of value-added tax. For inclusive rates, the defined percentage of tax is back-calculated from the charged amount.</p><h4>Custom taxation </h4><p>This taxation plug-in is similar to VAT and is specifically designed for those who need to apply different taxes depending on the type of charges (e.g. tax differently for recurring and usage charges). You can specify your own name and percentage rate value for this tax. You can apply it to: </p><ul data-start="385" xmlns=""><li>all services; </li><li>all services except for subscriptions and credits / adjustments;</li><li>only to subscriptions.</li></ul><h4>Using the EZtax suite with PortaBilling®</h4><p>To use EZtax suite, you must first sign a contract with EZtax company (their tax solution is a paid subscription service; please mention that you are a PortaOne customer to receive special pricing and other promotions) and obtain the EZtax libraries for installation on your server. After EZtax suite has been enabled in the PortaBilling® configuration, the following will be done for all customers with EZtax assigned as the taxation method: </p><ol data-start="1" xmlns=""><li>All accumulated transactions (xDRs, refunds, etc.) will be sent to EZtax suite along with the customer’s information (which is used to determine his tax jurisdiction).</li><li>EZtax suite will calculate all applicable taxes and send them back to PortaBilling®, so that they can be inserted as extra xDRs for the given customer (each type of tax will produce a separate record; thus if both state and city taxes are applicable, there will be two separate transactions).</li><li>PortaBilling® will then proceed to generate the invoice as usual.</li></ol><p> </p><p>In order to tax services properly, xDRs are mapped to EZtax transaction /service codes, which define what type of taxes apply to a given transaction. The current logic of mapping XDRs is as follows:</p><ol data-start="1" xmlns=""><li>If neither the CLI (origination number or ANI) nor the CLD (destination number or DNIS) record of the call event matches the North America Numbering Plan (NANP) format (i.e. the phone number should start with 1 followed by a 3-digit area code (NPA), then a 3-digit exchange prefix (NXX), and finally a 4-digit number), then this is considered to be an international call, and the VoIP International Usage (19, 51) transaction/service code is used.</li><li>If either the CLI or CLD matches the 1-NPA-NXX-NNNN pattern, but the given NPA-NXX combination is not found in the EZtax address database (this usually means that, even though the phone number starts with 1, it belongs to some other country - for instance, the Dominican Republic), the VoIP International Usage (19, 51) transaction/service code is likewise used.</li><li>Then the location identifier for CLI and CLD are compared further:</li></ol><ul data-start="1.453" xmlns=""><li><ul data-start="1.453"><li>If the CLI and CLD are identified as belonging to different countries, the VoIP International Usage (19, 51) transaction/service code is applied (calls from/to Canada fall under this category).<p>NOTE: Calls between the USA and Puerto Rico are defined as calls of the interstate type, and the VoIP Interstate Usage (19, 49) transaction/service code applies.</p></li><li>Then the state attributes in the location information are compared for CLI and CLD. If both CLI and CLD are reported as belonging to the same state, the VoIP Intrastate Usage (19, 50) transaction/service code is used; otherwise the VoIP Interstate Usage (19, 49) code is applied.</li></ul></li></ul><h5>EZtax suite updates</h5><p>EZtax company provides their customers with regular updates and PortaBilling® facilitates automatic updating of EZtax suite. This provides a safe and reliable way of updating EZtax suite with no unanticipated issues emerging during tax calculation. </p><p> </p><p>There are two options for the EZtax suite installation directory:</p><ul data-start="388" xmlns=""><li>Installation to the system’s default folder.</li><li>Installation to a separate folder for each of the system’s environments.</li></ul><p> </p><p>Thus if more than one company is hosted on one common system, each company may be associated with an individual EZtax contract. This provides the ability for installing particular versions of EZtax software with corresponding updates for each separate environment. Therefore, during tax calculation the folder for the environment will be checked first, and if the folder does not exist, all of the operations will be performed within the default folder.</p><h4>Tax calculation via Avalara</h4><p>Avalara is one of the largest tax calculation companies in the USA. Tax calculation via Avalara is done using the XML API. Your taxation configuration is stored within Avalara and all taxes are calculated by the Avalara middleware. This significantly simplifies taxation management for your administrators.</p><p> </p><p>The tax calculation process is as follows:</p><ul data-start="1.455" xmlns=""><li><ul data-start="1.455"><li>PortaBilling® sends all customer xDRs, along with customer location information, to Avalara using the API. </li><li>Avalara calculates the taxes and then returns those calculations to PortaBilling®.</li><li>PortaBilling® uses this tax information to generate xDRs for taxes and then produce invoices.<p> </p><p>Avalara calculates taxes based on the customers’ tax jurisdiction, which is determined using PCodes – permanent jurisdiction codes. These PCodes are obtained from the customer’s location (the ZIP code) and the CLI / CLD numbers in xDRs using the code mapping table provided by Avalara. This ensures accurate tax calculation. </p><p> </p><p>If CLI / CLD numbers are not present in the xDRs (e.g. an xDR for subscription charges or manual credit), the customer’s location PCode is used.</p><p> </p><p>As a result of tax calculation, PortaBilling® receives summarized taxes grouped by tax type (e.g. federal, state, etc.) and generates separate xDRs for each tax type. </p><h5>Configuration </h5><p>To enable tax calculation via Avalara, first establish the account with Avalara. Contact the Avalara support team (<a href="mailto:support@eztax.com">support@eztax.com</a>) to activate the Customer Mode service. Customer Mode is mandatory to group transactions that apply to the same customer and speed up the tax calculation process. </p><p> </p><p>Second, contact the PortaOne support team to configure the Avalara module on the Configuration server and install the Avalara plug-in. </p><p> </p><p>Lastly, to configure the Avalara taxation parameters on the web interface: </p></li><li>Configure the Avalara taxation plug-in.</li><li>Configure the taxation parameters that apply to you as the service provider on the My Company Info page.</li><li>Select the Avalara taxation method and define the taxation parameters for your customers for the customer class or for an individual customer. </li></ul></li></ul><p> </p><p>For backward compatibility, the EZTax taxation plug-in is still available. However, due to the simplified management of the Avalara updates, it is recommended that you switch to Avalara taxation.</p><h4>Using the SureTax taxation plug-in with PortaBilling®</h4><p>SureTax is another taxation system that allows you to accurately and easily calculate taxes for your US and Canada customers.</p><p> </p><p>You can use this taxation method to tax services (e.g. voice calls, DID usage, etc.), subscriptions, bundle promotions and payments. SureTax (as a taxation method) can be defined within the customer class or for the individual customer. </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image240.png" width="460.2" height="316.2" alt="SureTax configuration"/></p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image241.png" width="460.8" height="428.2" alt="SureTax customer"/></p><p> </p><p>When you select SureTax as a taxation plug-in, you can define such parameters as:</p><ul data-start="390" xmlns=""><li>type of customer; </li><li>summary type; </li><li>type of tax exemption.<h4>Goods and services taxation plug-in for Malaysia</h4><p>The GST (Malaysia) plug-in handles the goods and services tax (GST) that was implemented in Malaysia in April 2015.  </p><p> </p><p>This plug-in does the following: </p></li><li>Applies 6% GST.</li><li>Provides the option to specify tax relief certificate information, and in the case of goods that fall under the certificate, applies 0% GST.  <p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image242.png" width="460.2" height="470.4" alt="GST taxation customer"/></p><p> </p></li><li>Creates individual tax xDRs for each subscription, manual charge and manual credit. </li><li>Creates individual tax xDRs for different service subtypes, for example, voice calls to a mobile network or text messages sent to favorite numbers (service subtypes are defined based on destination ranges).</li><li>Uses mathematical rounding on tax amounts (i.e. 1.204 rounds to 1.20, 1.205 rounds to 1.21, 1.206 rounds to 1.21, etc.).</li></ul><h3><a id="_Hlk24708093"></a>Unified codes for tax calculation via external plug-ins</h3><p>Different taxation plug-ins have individual sets of taxation codes that do not always coincide. Therefore, when a service provider switches from one taxation system to another, service management could become cumbersome and lead to misconfigurations (e.g. when an existing customer with one kind of taxation signs up for a product that uses another type of taxation). </p><p> </p><p>To simplify this task, the tax processing logic has been unified as follows:</p><p> </p><p>Taxation for all transactions is defined in PortaBilling® using internal tax transaction codes. An internal tax transaction code corresponds to the taxation code of the selected tax plug-in(s). Each set of internal tax transaction codes is unique for the administrator and their resellers. </p><p> </p><p>To illustrate the tax process for customers, consider the following example:</p><p> </p><p>Service provider TATA-Telecom provides voice calls, SMS and Internet access services to residential customers. They offer different promotions as part of their marketing campaign and provide users with additional products. They also have a range of IP Centrex customers and charge them for their number of active calls. </p><p> </p><p>They have been calculating taxes via the taxation company A. However, they have received a better offer from taxation company B and will soon begin to use them to calculate taxes.  </p><p> </p><p>To simplify service management and ensure proper taxation for every customer, the administrator creates internal tax transaction codes for every taxation transaction and maps them to the taxation codes of companies A and B.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image243.png" width="461.5" height="212.5" alt="Tax transaction code setup"/></p><p> </p><p>Then the administrator defines the internal tax transaction codes for each service provided: </p><ul data-start="1.461" xmlns=""><li><ul data-start="1.461"><li>Custom services;</li><li>Subscriptions;</li><li>Service wallets;</li><li>Bundle promotions;</li><li>DID usage.<p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image244.png" width="461.5" height="360.4" alt="Tax transaction code definition"/></p><p> </p><p>To apply taxes to measured services, the administrator creates a service and defines the tax transaction codes within it.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image245.png" width="461.5" height="236.8" alt="Service with TTC"/></p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image246.png" width="461.5" height="175.4" alt="Measured service"/></p><p> </p><p>When customers’ billing periods close, PortaBilling® selects company A’s taxation codes for customers that still have that configured as their taxation method and sends them to that company. Likewise, PortaBilling® selects and sends company B’s taxation codes to newly added customers.</p><p> </p><p>Thereby the administrator configures taxation for service wallets, subscriptions, bundle promotions and measured services in a unified manner with just a few mouse clicks.</p><p> </p><p>In summary, the key assets of tax calculation using internal tax transaction codes are as follows:</p></li><li>Internal tax transaction codes must be specified for each transaction and custom service.</li><li>Internal tax transaction codes must be mapped to each of the taxation plug-in(s’) taxation codes configured in the system. </li><li>Internal tax transaction codes are ignored for customers that have VAT or custom taxation.</li><li>Internal tax transaction codes are unique for administrators and resellers.</li><li>The tax transaction codes are preserved when the administrator clones volume discount plans for the same entity (e.g. when the administrator clones a discount for their own use). Consequently, once the volume discount plan owner is changed, the tax transaction code will not be cloned and must be defined later (i.e. when the administrator clones reseller A’s discount and defines reseller B as its owner).<h3><a id="_Taxation_of_subscriptions"></a><a id="_Hlk24708214"></a>Taxation of subscriptions</h3><p>A subscription can cover either a single service (e.g. an IPTV channel package) or a service bundle (e.g. 100 free minutes for domestic destinations, 200 minutes of calls to Europe and SIP phone rental for a $20 monthly fee). In either case, subscriptions are taxed as a single unit. PortaBilling® produces a single xDR that covers the subscription’s fee. PortaBilling® then sends this xDR and the tax code associated with it for taxation. Thus, if you offer several services for a subscription, the tax code must cover each of them.</p><p> </p><p>For this reason, you must describe your bundle to the taxation company in detail:</p></li><li>which services are included,</li><li>the price for each service, and</li><li>the estimated percentage of every service to be used within the bundle.<p> </p><p>For example, you offer 100 free minutes of domestic calls for a $30 monthly subscription. You describe your service bundle as follows:</p></li><li>interstate calls: $15 and 40% of estimated usage;</li><li>intrastate calls: $10 and 50% of estimated usage;</li><li>calls to toll-free numbers: $5 and 10% of estimated usage.</li></ul></li></ul><p> </p><p>Each subscription can include up to three separate fees: an activation fee, a periodic fee and a cancellation fee. Each fee may consist of charges for one or more different services (e.g. the activation fee includes equipment costs, the periodic fee covers voice call services and the cancellation fee covers some administrative costs). To calculate taxes for such a subscription, tax codes must cover every service within a bundle and must be defined separately for each subscription fee.</p><p> </p><p>The taxation company can then correctly assess each service for taxation and provide the bundle tax codes. Your administrator configures a subscription in PortaBilling® and associates the codes with it.</p><p> </p><p>Depending on the taxation company, the tax codes can be of different types. SureTax defines only transaction codes while Avalara divides them into transaction and service codes.</p><p> </p><p>To illustrate the taxation of subscriptions, let’s say that a $20 recurring subscription fee covers the following services:</p><ul data-start="398" xmlns=""><li>The SIP phone rental for $2.</li><li>Domestic calls for $6.</li><li>International calls for $12.</li></ul><p> </p><p>The selected tax company is Avalara. </p><p> </p><p>The service provider describes their service bundle to Avalara and receives the transaction / service codes. The administrator enters these codes in PortaBilling®, associates them with the subscription and assigns the subscription to the customer. </p><p> </p><p>At the end of the customer’s billing period, PortaBilling calculates their subscription charges and produces a single xDR record for $20. PortaBilling® sends this xDR and the tax codes to Avalara. After the taxes are calculated and the data is forwarded back to PortaBilling®, it applies them to the customer’s balance and generates the invoice.</p><p> </p><p>For consistency, taxes for subscriptions and bundle promotions are calculated the same way: for a single xDR with the total amount of charges and using a tax code for the entire service bundle.</p><p> </p><p>To summarize, these steps must be completed for subscription taxation:</p><ul data-start="1.477" xmlns=""><li><ul data-start="1.477"><li>Describe your service bundles to the taxation company (e.g. SureTax) to receive the bundle tax codes.</li><li>Configure taxation in PortaBilling®:</li><li>Configure the taxation system;</li><li>Configure the tax codes. PortaBilling® uses internal tax codes mapped to the actual tax codes. This is done to simplify taxation management for two taxation systems (e.g. when you switch from one system to another). Therefore, create internal tax codes and associate the bundle tax codes with them (Please refer to the <a href="#_Hlk24708093">Unified codes for tax calculation via external plug-ins</a> section for details). </li><li>Configure service bundles as subscriptions and assign corresponding tax codes to them.</li></ul></li></ul><h3>Taxation management by resellers</h3><p>Since your resellers are separate business entities, they have different taxation parameters. To properly calculate taxes for their customers, resellers and administrators manage their taxation parameters separately.</p><p> </p><p>Administrators and resellers independently configure taxation plug-ins (Avalara, SureTax or EZTax) on the Taxation tab and apply them to their customers.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image247.png" width="1204.8" height="480.9" alt="taxation configuration"/></p><p> </p><p>As a result, PortaBilling® clearly distinguishes between resellers’ customers and those of an administrator and ensures proper tax calculation for them.</p><p> </p><p>Optionally, if you calculate taxes via SureTax, you may configure a single taxation plug-in and allow resellers to apply it to their customers. To do this, set Yes for the AllowTaxPluginCredentialsInheritance option of the Configuration server. SureTax distinguishes customer xDRs received from PortaBilling® based on the reseller ID and then creates separate tax reports for your own customers and for those of your resellers.</p><p> </p><p>Taxation management for resellers grants additional flexibility to their service provisioning and ensures proper tax processing for their customers. </p><h3>Taxes upon payment</h3><p>As a general rule, taxes for consumed services are calculated at the end of each billing period and are included in the invoice that the customer receives.</p><p> </p><p>However, for prepaid services such as prepaid cards, taxes are applied at the time a calling card or top-up voucher is purchased. The amount of the card excludes taxes. If later on a customer makes a payment using a credit card to top-up his / her account, the taxes must be applied at the time of purchase.</p><p> </p><p>To enable taxes to be calculated and applied to customers at the time of payment, specify the tax rate and select the Apply taxes at the moment of the payment (prepaid Customers only) option for a particular customer class. Thus, you can differentiate among your prepaid customers and specify different tax rates for them (e.g. Canadian residential customers are charged 13% HST tax while European residential customers are charged 20% VAT tax).</p><p> </p><p> <img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image248.png" width="460.8" height="404.5" alt="Taxes upon payment"/></p><p> </p><p>This is how it works:</p><p> </p><p>When a prepaid customer makes a payment via a credit card on the self-care interface the tax is calculated for them based on the amount of the top-up and is added to the payment sum. Upon successful payment processing, the customer’s balance is topped up by the actual amount excluding the tax. </p><p> </p><p>For each payment transaction, two xDRs are created and recorded in the database, one for the total payment made (the topped-up amount + tax) and another one that only contains the amount of tax.</p><p> </p><p>Consider the following example:</p><p> </p><p>A prepaid customer, John Doe from Vancouver, BC, buys a $10 prepaid card and registers it for PINless dialing service. </p><p> </p><p>After a while he only has $4 in available funds so he wants to top up his account.</p><p> </p><p>He visits his self-care interface and enters $10 as the top-up amount. A $1.30 HST tax (13%) is calculated and added to the amount entered, bringing the total sum to $11.30. </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image249.png" width="806.5" height="469.8" alt="Taxes upon payment_sc"/></p><p> </p><p>John Doe confirms the payment and his credit card is charged $11.30. After the payment is processed, two xDRs are recorded in the database: one for the amount paid ($11.30) and another one for the amount of tax ($1.30). John’s available funds are now $14.</p><p> </p><p>If the top-up is done using a voucher, the tax amount is not included in the voucher. However, the taxes are included in the voucher purchase (e.g. when John Doe buys a $10 voucher, he pays $11.30).</p><p> </p><p>Thus, calculating taxes and applying them to your customers when they make payments allows you to effectively manage your tax proceeds and keep your accounting clear.</p><h4>Applying taxes to auto-payments </h4><p>Very often, customers prefer to make regular automatic payments so that their service is uninterrupted and they do not have to bother with invoices. When customers use services on a prepaid basis, their taxes are calculated at the time of purchase, i.e. when they top up their available funds.</p><p> </p><p>Typically, taxes for customers in the USA and Canada are calculated by external taxation companies such as SureTax and Avalara. When prepaid customers automatically top-up their available funds, PortaBilling® properly determines taxes and adds them to the total sum of amount charged. </p><p> </p><p>Since a prepaid amount can cover multiple services and / or destinations which might be taxed differently, it is necessary for the ITSP to estimate the percentage of services their customers will use (e.g. for local, long distance and international calls and domestic SMSs) to know which taxes to apply. To do that, the ITSP contacts the taxation company (e.g. SureTax) and describes their service needs. </p><p> </p><p>Based on that data, SureTax creates a taxation bundle for the ITSP and provides a bundle ID (e.g. 100). This bundle ID is then used as a tax transaction code for a main balance top-up in PortaBilling®. </p><p> </p><p>To configure PortaBilling® to calculate and add tax amounts to prepaid customers’ auto-payments, an administrator must map the bundle ID received from the taxation company to the internal tax transaction code. </p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image250.png" width="460.2" height="197.1" alt="tax code setup"/></p><p> </p><p>Then the administrator creates a customer class and specifies when to assess taxes, defines the tax transaction code and assigns that customer class to a prepaid customer.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image251.png" width="460.2" height="332.8" alt="Taxation setup"/></p><p> </p><p>For example, let’s say your taxation company is SureTax and your prepaid customer, “ABC,” wants to automatically make a payment of $90.00 each time their available funds drop to $10.00. </p><p> </p><p>When the auto-payment is initiated, PortaBilling® sends a request to SureTax with the tax transaction code and the amount to be paid ($90). SureTax calculates the taxes and PortaBilling® receives $6.3 in taxes from SureTax and then adds it to the payment amount. The sum of $96.3 is then withdrawn from the customer’s credit card.</p><p> </p><p>When the transaction is processed, PortaBilling® creates two xDRs: one with the amount charged ($96.3) and the other with the tax amount applied ($6.3). </p><p>NOTE: The number of xDRs may depend on the number of taxes applied. </p><p>The administrator can also override the existing taxation parameters for an individual customer on the Edit Customer page.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image252.png" width="460.2" height="332.8" alt="taxation for customer"/></p><p>NOTE: If you override the taxation parameters for a customer, you must define the main balance top-up tax transaction code. </p></div></body></html>