<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"/><title>Flexible definition of the party to charge</title><meta name="generator" content="Adobe RoboHelp 2019"/><link rel="stylesheet" href="../assets/css/default.css"/><link rel="stylesheet" href="../assets/css/PortaBilling_Admin_Guide_MR82.css"/></head><body><div><ul data-start="180" xmlns=""><li><h2><a id="_Toc31205397"></a>Flexible definition of the party to charge</h2><p>Modern business involves diverse types of services, which require different types of billing. Calls made by prepaid cards are billed by PIN number, calls from a customer’s GW should be billed by IP address, some wholesale customers are identified only by the port they are connected to, and so on. </p><p> </p><p>It is easy to find out that a billing event occurred (e.g. a call was made). The important thing is to correctly determine who made the call and, therefore, who should be charged for it. PortaBilling® uses a simple and flexible yet powerful method to determine a call’s owner. Identification of the account (Account ID) is sent to the billing system in the User-Name attribute. </p><p> </p><p>For example, in the case of prepaid calling cards, User-Name will contain the PIN, IP address for IP-based billing, and so on. Of course, an account with such an account ID must exist in the database. This way of utilizing the User-Name attribute is actually default behavior for Cisco call handling applications, and the latest firmware releases of Quintum should do the same.</p><p> </p><p>Since PortaBilling® supports account aliases, in some cases the value of the User-Name attribute will first be matched against the ID of an alias, which then will be used to retrieve the main account information. However, the principle remains the same.</p><p> </p><p>Due to such an approach, logic in the billing is independent from service-specific issues. You are not limited to any pre-defined billing schemes in PortaBilling®; rather, you can design your own. Today you can bill by PIN or IP address, and tomorrow you will additionally be able to bill by h323-id. All you need to do is pick the proper application to handle the call, so that a correct identification will be sent in the User-Name. </p><p> </p><p>Unfortunately, for some types of service User-Name is not sent to the billing properly on Quintum gateways. In this case, it is possible to employ username replacement rules on the billing side to emulate this. See the relevant section in the &quot;How to:&quot; chapter for more details.</p></li></ul></div></body></html>