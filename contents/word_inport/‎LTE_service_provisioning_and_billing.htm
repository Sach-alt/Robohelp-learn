<?xml version="1.0" encoding="utf-8" ?>

<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta charset="UTF-8"/><title>‎LTE service provisioning and billing</title><meta name="generator" content="Adobe RoboHelp 2019"/><link rel="stylesheet" href="../assets/css/default.css"/><link rel="stylesheet" href="../assets/css/PortaBilling_Admin_Guide_MR82.css"/></head><body><div><h2><br/>‎<a id="_Toc31205423"></a><span>LTE service provisioning and billing</span></h2><p>LTE (Long Term Evolution) is becoming the new standard for building wireless networks. Numerous benefits in terms of radio technology (which are beyond the scope of this document) allow service providers to deploy the LTE network rapidly and at reduced cost. The large amount of bandwidth available to each consumer allows the provision of high-speed Internet combined with VoLTE and IPTV services. Standardized network infrastructure and interconnection between network elements (based on IMS) allow fast network expansion, easy replacement of some components and seamless interconnection with other operators.</p><p> </p><p>PortaBilling can serve as the B/OSS system for LTE services, i.e. it manages customer data (including unified balance), service configuration details, product/rate tables, and so on for LTE just like for other services (VoIP or DSL Internet access). This allows the creation of a truly convergent environment and easy migration of existing customers (e.g. using WiMAX service) to the LTE network.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image180.png" width="585.7" height="328.0" alt="LTE"/></p><p> </p><p>In terms of the network, PortaBilling performs the function of an OCS (Online Charging System). It communicates with SAE-GW via Diameter (Gy) for real-time session authorization and rating. The same Gy interface is used to disconnect a customer exceeding his credit limit or switch him to a different class of services when the usage quota is used up.</p><p> </p><p>PortaBilling® provisions customer data to HSS (to permit centralized user authentication across the network) and PCRF (to allocate the correct policy / QoS parameters to the customer). </p><p> </p><p>PortaBilling® can also provision static IP addresses to HSS. This functionality provides a variety of benefits, including the opportunity to access LTE devices from the Internet, provide remote support, set up security cameras, set up a VPN connection and use the advanced features (e.g. port forwarding), among others.</p><p>NOTE: Static IP address provisioning to HSS is supported only for the Huawei SAE-GW and Aricent provisioning modules. Please contact the PortaOne® support team for assistance with how to provision a static IP address via a different manufacturer’s gateways.</p><h3>Precise real-time billing for period switch </h3><p>In real-time billing for sessions that span several peak and off-peak periods, it is important to calculate the exact amount of traffic consumed during each time period. </p><p> </p><p>To manage this task, PortaBilling® sends the exact time of the period switch to the gateway so that traffic consumption can be separately calculated for each period. Then the gateway sends these two figures to PortaBilling®. This allows providers of LTE, 3G, etc. to introduce precision in billing for separate time periods and preserve the continuity of the connection. </p><p> </p><p>This is how it works: </p><p> </p><p>A gateway sends recurring credit control requests to PortaBilling® in which the amount of traffic already consumed is reported. PortaBilling® sends the information about the traffic and time available to provide the service in the credit control answer. If PortaBilling® detects that the peak / off-peak switch will occur during the permitted time, then it includes the time of the switch in the credit control answer. The gateway then calculates traffic consumption separately for each period and sends these two numbers to PortaBilling®. PortaBilling® matches these numbers to peak and off-peak rates and creates two xDRs for charging the user accordingly.</p><p>NOTE: Your gateway must support the Tariff-Time-Change attribute.</p><p>To configure precise real-time billing for period switch, specify Yes for the tariff-time-change option in the Internet Access policy. For more details and configuration guidance, see the <a href="http://www.portaone.com/resources/documentation/MRXX/index.htm">How To …</a> handbook of the LTE Provisioning section).</p><h3>Rating groups</h3><p>ISPs can differentiate among types of Internet traffic. This enables them to bill customers differently, based on the content they access (e.g. provide free access to your hotline portal while charging users for watching movies online). Such content-based billing is implemented via rating groups. Their usage provides extra space for special offers and promotions and can be used to influence customers’ usage patterns, thereby increasing company revenues.</p><p> </p><p>Let’s consider the following example. A service provider offers Internet access free of charge to the following addresses: </p><p> </p><ul data-start="1.263" xmlns=""><li><ul data-start="1.263"><li>Service provider’s hotline website</li><li>Social networks, and</li><li>Service provider’s SIP server (for making SIP calls). <p> </p><p>Everything else is billed using a standard price. To configure this, the service provider defines the rating groups on the network side (gateway, PCRF, etc.) and assigns a unique index to each of them. For example:</p><p> </p></li><li>Service provider’s hotline website – RG101</li><li>Social networks – RG102</li><li>Service provider’s SIP server – RG103</li><li>Regular web browsing – RG104.<p> </p><p>When an end user visits a website, the gateway sends the rating-group attribute that defines this type of Internet traffic to PortaBilling®. PortaBilling® matches the rating-group attribute with a corresponding rate in the customer’s tariff and applies the charge. Note that the NETACCESS rate must also be present in the tariff to authorize a user and charge for any other rating group.</p><p> </p><p>For detailed information about how to configure content-based billing, refer to the <a href="http://portaone.com/resources/documentation/MRXX">Unified PortaSwitch Handbook Collection</a>.</p><h4>Multiple rating group authorization</h4><p>A customer can use different content within the same session (e.g. open a Facebook page and watch a YouTube video). In this case, the node sends two rating groups and requests the amount of Internet quota for each group in the authorization request. </p><p> </p><p>PortaBilling® authorizes all rating groups provided within the same authorization request. To make this happen, it supports the Multiple-Services-Credit-Control (MSCC) AVP for Diameter(Gy). When P-GW sends the MSCC group in the Credit Control Request - Initiate (CCR-I) message to PortaBilling®, PortaBilling® authorizes rating groups within MSCC AVPs one by one, starting from the most expensive.  </p><p> </p><p>To illustrate how this works, consider the following example:</p><p>Let’s say you introduce access to different Internet content types via add-ons. </p><p> </p><p>You have configured the P-GW to send rating group 101 for YouTube watching and rating group 102 for online games. Other types of Internet access (e.g. regular web browsing, emails, etc.) are authorized using the NETACCESS rate in a customer tariff. The P-GW requests 100MB for each type of Internet content in the authorization request.</p><p> </p><p>A user product configuration includes a default 500MB quota that can be used for any online activity. </p><p> </p><p>John Doe has signed up for 1GB of YouTube watching for $5 / month. He has already used up 950 MB and has only 50MB available. </p><p> </p><p>When on the next day he connects to the Internet to check his emails and watch YouTube, PortaBilling® authorizes his session as follows:</p></li><li>For rating group 101 PortaBilling® first checks the amount of quota available for YouTube. Since the user has only 50 MB left, PortaBilling® allocates this amount, plus allocates 50 MB from the default 500MB quota.</li><li>PortaBilling® authorizes the user for email check using the NETACCESS rate and allocates 100MB from the remaining 450MB (500 MB – 50MB = 450MB) of default quota.</li><li>When 100MB allocated for YouTube is consumed, the P-GW sends another authorization request for rating group 101. PortaBilling® authorizes it and allocates another 100MB from the user’s default quota.<p> </p><p>Thus, users are protected from overdraft and PortaBilling® charges correctly and precisely for their Internet usage.</p><h3>Billing for the LTE service in roaming</h3><p>To stay competitive in the mobile market, wireless operators provide their subscribers with roaming Internet service when their subscribers visit other regions or countries. Wireless operators can bill their subscribers differently – according to the country and mobile network within which the Internet is actually used. The country and network are identified by the MCC / MNC codes.</p><p>NOTE:  The ASN-GW must send the 3GPP-SGSN-MCC-MNC attribute in Diameter (Gy) requests. </p><p>Consider the following example:</p><p> </p><p>MVNO GoMobile provides home network Internet access for $0.1/MB. For roaming Internet, GoMobile charges $0.5/MB in Australia and $0.7/MB in the UK.</p><p> </p><p>John Doe is going to travel abroad so he tops up his available funds by $100. In Australia he uses 20 MB of roaming Internet service for $10 ($0.5/MB * 20 MB = $10). And from Australia, John visits the UK where he uses 35 MB of roaming Internet service and is charged $24.5 ($0.7/MB * 35 MB = $24.5). </p><p> </p><p>At the end of the trip John still has $65.5 left ($100 - ($10 + $24.5) = $65.5). When John returns to his home network and begins browsing the Internet, he is once again charged $0.1/MB.</p><p> </p><p>To configure the billing for roaming Internet service based on the country and network, a wireless operator must:</p><p> </p></li><li>enable the RateMatchWithE212 option on the Configuration server, and</li><li>create a customer tariff in the E.212 format.</li><li>specify the home PLMN (Public Land Mobile Network) in the Internet access policy (e.g. home-plmn-e212-match = 310).<p> </p><p>When the home PLMN is configured, the roaming xDRs are grouped separately on invoices and in the xDR browser / Transactions page. Thus, when subscribers log into their self-care web interface, they can clearly differentiate Internet services consumed within their home network from those used in roaming. The detailed view provides information about the roaming country and charges.</p><p> </p><p>For instance, John Doe wants to review the costs for Internet usage in roaming mode. He browses the billing statistics on his self-care web interface, finds the records for roaming services grouped together and reviews the roaming charges.</p><p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image181.png" width="462.1" height="273.9" alt="Viewing billing statistics for the Internet service in roaming."/></p><p> </p><p>It is possible to configure the billing for national roaming Internet. Please contact the PortaOne® support team for more details.</p><p> </p><p>By using this solution, wireless operators can bill subscribers differently based on the MCC / MNC and thereby improve their cash-flow. </p><h3>Individual hotlining </h3><p>Hotlining is a convenient way to redirect end users who subscribe to WiMAX, LTE or 3GPP services to a defined website. There they can quickly find information about how to subscribe or prolong their Internet service if their traffic quota or balance are insufficient for using the Internet. Different services can be provided (e.g. for residential and airport hotspots; resellers, etc.) and a hotlining link can be configured for each of them using individual Internet access policies. </p><p> </p><p>To configure hotline redirection, create an Internet access policy and assign it either to a product or directly to an account. Input the main configuration parameters on the Hotline tab: </p></li><li>When account out of funds – Select this option to redirect end users if their traffic quota or balance are insufficient for accessing the Internet.</li><li>When account suspended or blocked – Select this option to redirect end users whose accounts are blocked, suspended or expired.</li><li>Captive portal URL – Specify the website in the URL format where end users are redirected to.<p> </p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image182.png" width="460.2" height="179.2" alt="Hotlining setup"/></p><p>NOTE: Hotlining is a feature that relies on a third-party network solution. Make sure that the networking platform (NAS, ASN, etc.) supports hotlining and is properly configured.</p><p><img src="../assets/images/PortaBilling_Admin_Guide_MR82_files/image183.png" width="38.4" height="38.4" alt="Wor1338"/>Note that services provisioned via the Diameter protocol require the billing engine’s DIAMETER module to be enabled on the Configuration server. On that same page it is possible to globally set the hotlining link for all PortaBilling® environments.</p><p> </p><p>PortaBilling currently supports the Diameter Credit-Control Application (<a href="https://tools.ietf.org/html/rfc4006">DCCA</a>) with additional AVPs defined in <a href="http://www.3gpp.org/DynaReport/32299.htm">3GPP TS 32.299</a> (version 12.0.0 Release 12).</p><h5>Configuration for unregistered accounts</h5><p>It is also possible to configure hotlining for end users who are not registered in PortaBilling® instead of just rejecting the session. To do this, perform the following steps:</p></li><li>Create an account with the <a href="mailto:UNKNOWN@msisdn">UNKNOWN@msisdn</a> account ID.</li><li>Create an Internet access policy with configured hotline redirection.</li><li>Assign the Internet access policy to the account. <p> </p><p>If PortaBilling® does not find the account that attempts to access the Internet service, the system uses the <a href="mailto:UNKNOWN@msisdn">UNKNOWN@msisdn</a> account configuration and redirects the user to the defined webpage. </p></li></ul></li></ul></div></body></html>